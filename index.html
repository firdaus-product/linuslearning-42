<!DOCTYPE html>
<html lang="ms-MY">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Kemahiran Pemulihan: Operasi Bahagi (Pembelajaran)</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    /* Gaya (style) asal dikekalkan sepenuhnya */
    body { box-sizing: border-box; }
    .activity-card { min-height: 400px; }
    .number-card { transition: all .3s ease; cursor: pointer; }
    .number-card:hover { transform: scale(1.05); }
    .draggable-item {
      transition: all .3s ease;
      cursor: move;
    }
    .draggable-item:hover {
      transform: scale(1.05);
      box-shadow: 0 4px 10px rgba(0,0,0,0.1);
    }
    .dragging { opacity: .5; transform: rotate(5deg); }

    /* Drop zone */
    .drop-zone {
      border: 2px dashed #cbd5e1;
      transition: all .3s ease;
      min-width: 60px;
      min-height: 60px;
      display: inline-block;
      vertical-align: middle;
    }
    .drop-zone.drag-over { border-color: #3b82f6; background-color: #eff6ff; }

    /* Salah */
    @keyframes shake {
      0% { transform: translateX(0); }
      25% { transform: translateX(-5px); }
      50% { transform: translateX(5px); }
      75% { transform: translateX(-5px); }
      100% { transform: translateX(0); }
    }
    .shake { animation: shake 0.5s ease; }

    /* Zon sudah diisi */
    .drop-zone-filled {
      border-style: solid;
      border-color: #4ade80;
      background-color: #f0fdf4;
    }
  </style>
</head>
<body class="bg-gradient-to-br from-blue-50 to-purple-50 min-h-full">

  <div class="bg-yellow-100 border-b-4 border-yellow-300 p-4 shadow-sm sticky top-0 z-10">
    <div class="max-w-6xl mx-auto flex items-center justify-between">
      <div class="flex items-center gap-3">
        <span class="text-2xl">ğŸ“š</span>
        <span id="info-text" class="text-lg font-semibold text-gray-800">
          Pilih aktiviti untuk mula belajar bahagi!
        </span>
      </div>
      <button id="speak-btn"
              class="bg-yellow-300 hover:bg-yellow-400 text-yellow-800 font-bold py-2 px-4 rounded-full text-xl transition-colors duration-200"
              onclick="speakInfo()">
        ğŸ”Š
      </button>
    </div>
  </div>

  <div class="max-w-6xl mx-auto p-6">
    <div class="bg-white rounded-xl shadow-lg p-6 mb-6 activity-card flex items-center justify-center">
      <div id="activity-content" class="text-center w-full">
        <div class="py-16">
          <div class="text-6xl mb-4">â—</div>
          <h2 class="text-3xl font-bold text-gray-800 mb-4">
            Kemahiran Pemulihan: Operasi Bahagi
          </h2>
          <p class="text-xl text-gray-600 mb-8">
            Pilih aktiviti di bawah untuk meneroka konsep bahagi.
          </p>
          <div class="text-4xl">ğŸ‘‡</div>
        </div>
      </div>
    </div>

    <div class="bg-white rounded-xl shadow-lg p-6">
      <h3 class="text-2xl font-bold text-gray-800 mb-4 text-center">Pilih Aktiviti</h3>
      <div class="grid grid-cols-1 md:grid-cols-3 lg:grid-cols-5 gap-4 mb-6">
        <button onclick="loadActivity(1)"
                class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-200">
          1. â– Tolak Berturut-turut
        </button>
        <button onclick="loadActivity(2)"
                class="bg-green-500 hover:bg-green-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-200">
          2. ğŸª Bungkus Biskut
        </button>
        <button onclick="loadActivity(3)"
                class="bg-purple-500 hover:bg-purple-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-200">
          3. ğŸ”µ Kongsi Sama Rata
        </button>
        <button onclick="loadActivity(4)"
                class="bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-200">
          4. ğŸ  Keluarga Fakta
        </button>
        <button onclick="loadActivity(5)"
                class="bg-red-500 hover:bg-red-600 text-white font-bold py-3 px-4 rounded-lg text-lg transition-colors duration-200">
          5. ğŸ  Akuarium Ajaib
        </button>
      </div>

      <div class="flex justify-center gap-4">
        <button onclick="clearActivity()" class="bg-gray-500 hover:bg-gray-600 text-white font-bold py-2 px-6 rounded-lg text-lg transition-colors duration-200">
          ğŸ§¹ Bersih
        </button>
        <button onclick="nextActivity()" class="bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-2 px-6 rounded-lg text-lg transition-colors duration-200">
          â¡ï¸ Seterusnya
        </button>
      </div>
    </div>
  </div>

  <script>
    let currentActivity = 0;
    let ttsEnabled = false;
    let currentInfo = "Pilih aktiviti untuk mula belajar bahagi!";
    let draggedElement = null;

    // State untuk aktiviti 1
    window.tolakGame = { baki: 0, tolak: 0, kiraan: 0 };

    /* ====== TTS (Dikekalkan) ====== */
    function speak(text) {
      if (!ttsEnabled) return;
      if (!('speechSynthesis' in window)) return;
      window.speechSynthesis.cancel();
      setTimeout(() => {
        const u = new SpeechSynthesisUtterance(text);
        u.lang = 'ms-MY';
        u.rate = 0.9; u.pitch = 1.05;
        const voices = window.speechSynthesis.getVoices();
        const ms = voices.find(v => v.lang === 'ms-MY' || v.lang?.startsWith('ms'));
        if (ms) u.voice = ms;
        window.speechSynthesis.speak(u);
      }, 100);
    }
    function setInfo(text) { currentInfo = text; document.getElementById('info-text').textContent = text; }
    function speakInfo() {
      if (!ttsEnabled) {
        ttsEnabled = true;
        const btn = document.getElementById('speak-btn');
        btn.classList.add('bg-green-300', 'hover:bg-green-400');
        btn.classList.remove('bg-yellow-300', 'hover:bg-yellow-400');
      }
      speak(currentInfo);
    }

    /* ====== DnD helpers (Dikekalkan) ====== */
    function dragStart(e) { draggedElement = e.target; e.target.classList.add('dragging'); }
    function dragEnd(e) { e.target.classList.remove('dragging'); document.querySelectorAll('.drop-zone').forEach(z=>z.classList.remove('drag-over')); }
    function allowDrop(e) { e.preventDefault(); if (e.currentTarget.classList.contains('drop-zone')) e.currentTarget.classList.add('drag-over'); }
    function dragLeave(e) { if (e.currentTarget.classList.contains('drop-zone')) e.currentTarget.classList.remove('drag-over'); }

    /* ====== Router ====== */
    function loadActivity(n) {
      currentActivity = n;
      const content = document.getElementById('activity-content');
      if (n === 1) return loadTolakBerturutActivity(content);
      if (n === 2) return loadBungkusBiskutActivity(content);
      if (n === 3) return loadKongsiSamaRataActivity(content);
      if (n === 4) return loadKeluargaFaktaActivity(content);
      if (n === 5) return loadAkuariumActivity(content);
    }

    /* ====== Aktiviti 1: Tolak Berturut-turut ====== */
    function initTolakGame(baki, tolak) {
      window.tolakGame = { baki: baki, tolak: tolak, kiraan: 0 };
      setInfo(`Kita ada ${baki} epal. Mari tolak ${tolak} epal berulang kali.`);
      speak(`Kita ada ${baki} epal. Mari tolak ${tolak} epal berulang kali.`);
      
      const pile = document.getElementById('tolak-pile');
      const result = document.getElementById('tolak-result');
      const btn = document.getElementById('tolak-btn');
      const summary = document.getElementById('tolak-summary');
      
      pile.innerHTML = Array(baki).fill('ğŸ').join('');
      result.innerHTML = '';
      btn.disabled = false;
      btn.innerHTML = `â– Tolak ${tolak}`;
      summary.innerHTML = '';
    }

    function loadTolakBerturutActivity(content) {
      const baki = 8; const tolak = 2;
      content.innerHTML = `
        <h3 class="text-2xl font-bold text-blue-600 mb-6">1. â– Tolak Berturut-turut (Konsep ${baki} &divide; ${tolak})</h3>
        <div class="mb-4">
          <h4 class="text-lg font-semibold mb-2">Timbunan Epal:</h4>
          <div id="tolak-pile" class="flex flex-wrap justify-center gap-2 text-4xl min-h-16"></div>
        </div>
        
        <button id="tolak-btn"
                class="bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg text-xl transition-colors duration-200 disabled:opacity-50"
                onclick="doTolak()">
          Mula
        </button>
        <button class="bg-gray-400 hover:bg-gray-500 text-white font-bold py-3 px-6 rounded-lg text-xl"
                onclick="initTolakGame(${baki}, ${tolak})">
          ğŸ”„ Mula Semula
        </button>

        <div class="mt-6">
          <h4 class="text-lg font-semibold mb-2">Epal yang ditolak (dimasukkan ke kotak):</h4>
          <div id="tolak-result" class="flex flex-col items-center gap-2 min-h-16"></div>
        </div>
        <div id="tolak-summary" class="mt-6 text-xl font-bold text-green-700"></div>
      `;
      initTolakGame(baki, tolak);
    }
    
    function doTolak() {
      let { baki, tolak, kiraan } = window.tolakGame;
      if (baki === 0) return;

      baki -= tolak;
      kiraan += 1;
      window.tolakGame = { baki, tolak, kiraan };

      document.getElementById('tolak-pile').innerHTML = Array(baki).fill('ğŸ').join('');
      
      const newGroup = document.createElement('div');
      newGroup.className = 'p-2 bg-gray-100 rounded-lg border border-gray-300 text-4xl';
      newGroup.innerHTML = Array(tolak).fill('ğŸ').join('');
      document.getElementById('tolak-result').appendChild(newGroup);
      
      const msg = `Tolak ${tolak}, baki ${baki}. Ini tolakan kali ke-${kiraan}.`;
      setInfo(msg); speak(msg);

      if (baki === 0) {
        document.getElementById('tolak-btn').disabled = true;
        const summaryMsg = `Syabas! Epal sudah habis. <br>Anda telah menolak ${tolak} sebanyak <span class="text-red-600">${kiraan}</span> kali. <br>Ayat matematik: <span class="text-blue-700">${tolakGame.tolak * kiraan} &divide; ${tolak} = ${kiraan}</span>`;
        document.getElementById('tolak-summary').innerHTML = summaryMsg;
        setInfo(`Syabas! Epal habis. Anda tolak ${kiraan} kali.`);
        speak(`Syabas! Epal habis. Anda tolak ${kiraan} kali.`);
      }
    }

    /* ====== Aktiviti 2: Bungkus Biskut (Grouping) ====== */
    function loadBungkusBiskutActivity(content) {
      const total = 9; const perPiring = 3; const numPiring = 3;
      setInfo(`Kita ada ${total} biskut. Seret biskut ke piring. Setiap piring mesti ada ${perPiring} biskut.`);
      
      let biskutHTML = '';
      for (let i = 0; i < total; i++) {
        biskutHTML += `
          <div class="draggable-item bg-yellow-100 border-2 border-yellow-300 rounded-full p-2 text-4xl"
               draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-item="biskut">
            ğŸª
          </div>`;
      }
      
      let piringHTML = '';
      for (let i = 0; i < numPiring; i++) {
        piringHTML += `
          <div class="drop-zone bg-white rounded-xl p-4 min-h-24 w-32 flex flex-wrap gap-1 justify-center items-center" 
               ondrop="dropOnPiring(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" 
               data-max="${perPiring}" data-count="0">
            <span class="text-gray-400 text-sm">Piring ${i+1}</span>
          </div>`;
      }

      content.innerHTML = `
        <h3 class="text-2xl font-bold text-green-600 mb-6">2. ğŸª Bungkus Biskut (Konsep ${total} &divide; ${perPiring})</h3>
        <div class="mb-8">
          <h4 class="text-lg font-semibold mb-3">Bakul Biskut (Pilih dari sini):</h4>
          <div id="biskut-basket" class="flex flex-wrap justify-center gap-4 min-h-16">
            ${biskutHTML}
          </div>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-3">Piring (Letak di sini):</h4>
          <div id="piring-area" class="flex flex-wrap items-center justify-center gap-4">
            ${piringHTML}
          </div>
        </div>
        <div id="biskut-summary" class="mt-6 text-xl font-bold text-green-700"></div>
      `;
    }

    function dropOnPiring(e) {
      e.preventDefault(); e.currentTarget.classList.remove('drag-over');
      if (!draggedElement || draggedElement.dataset.item !== 'biskut') return;

      const piring = e.currentTarget;
      let count = parseInt(piring.dataset.count);
      const max = parseInt(piring.dataset.max);

      if (count < max) {
        draggedElement.draggable = false;
        draggedElement.classList.remove('cursor-move', 'draggable-item');
        piring.appendChild(draggedElement);
        
        count++;
        piring.dataset.count = count;
        
        if (count === 1) {
          const placeholder = piring.querySelector('span');
          if (placeholder) placeholder.remove();
        }
        
        draggedElement = null;
        setInfo(`Satu biskut diletak. Piring ini ada ${count} biskut.`);
        speak(`Satu biskut diletak.`);

        if (count === max) {
          piring.classList.add('drop-zone-filled');
          piring.removeAttribute('ondrop');
          setInfo(`Piring ini penuh dengan ${max} biskut!`);
          speak(`Piring ini penuh.`);
        }
        
        checkBiskutSelesai();

      } else {
        setInfo(`Piring ini sudah penuh dengan ${max} biskut. Cuba piring lain.`);
        speak(`Piring ini penuh.`);
        piring.classList.add('shake');
        setTimeout(() => piring.classList.remove('shake'), 500);
      }
    }
    
    function checkBiskutSelesai() {
      if (document.getElementById('biskut-basket').children.length === 0) {
        const totalPiring = document.querySelectorAll('#piring-area .drop-zone-filled').length;
        const totalBiskut = 9;
        const perPiring = 3;
        const msg = `Syabas! Semua ${totalBiskut} biskut telah dibungkus ke dalam ${totalPiring} piring.
                     <br>Ayat matematik: <span class="text-blue-700">${totalBiskut} &divide; ${perPiring} = ${totalPiring}</span>`;
        document.getElementById('biskut-summary').innerHTML = msg;
        setInfo(`Syabas! Semua biskut dibungkus.`);
        speak(`Syabas! Semua biskut dibungkus.`);
      }
    }

    /* ====== Aktiviti 3: Kongsi Sama Rata (Sharing) ====== */
    function loadKongsiSamaRataActivity(content) {
      const total = 8; const numKanak = 4;
      setInfo(`Kita ada ${total} guli. Agihkan guli ini SATU DEMI SATU kepada ${numKanak} kawan.`);
      
      let guliHTML = '';
      for (let i = 0; i < total; i++) {
        guliHTML += `
          <div class="draggable-item bg-blue-100 border-2 border-blue-300 rounded-full h-12 w-12 text-2xl flex items-center justify-center"
               draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-item="guli">
            ğŸ”µ
          </div>`;
      }
      
      let kanakHTML = '';
      for (let i = 0; i < numKanak; i++) {
        kanakHTML += `
          <div class="drop-zone bg-purple-50 rounded-xl p-4 min-h-24 w-32 flex flex-col gap-1 justify-start items-center" 
               ondrop="dropOnKanak(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)">
            <span class="text-4xl">ğŸ§’</span>
            <span class="text-gray-500 text-sm font-semibold">Kawan ${i+1}</span>
          </div>`;
      }

      content.innerHTML = `
        <h3 class="text-2xl font-bold text-purple-600 mb-6">3. ğŸ”µ Kongsi Sama Rata (Konsep ${total} &divide; ${numKanak})</h3>
        <div class="mb-8">
          <h4 class="text-lg font-semibold mb-3">Longgokan Guli (Pilih dari sini):</h4>
          <div id="guli-pile" class="flex flex-wrap justify-center gap-4 min-h-16">
            ${guliHTML}
          </div>
        </div>
        <div>
          <h4 class="text-lg font-semibold mb-3">Kawan-kawan (Letak di sini):</h4>
          <div id="kanak-area" class="flex flex-wrap items-start justify-center gap-4">
            ${kanakHTML}
          </div>
        </div>
        <button id="semak-kongsi-btn" class="hidden mt-6 bg-indigo-500 hover:bg-indigo-600 text-white font-bold py-3 px-6 rounded-lg text-xl" onclick="checkKongsiSelesai()">
          âœ… Semak Agihan
        </button>
        <div id="kongsi-summary" class="mt-6 text-xl font-bold text-green-700"></div>
      `;
    }
    
    function dropOnKanak(e) {
      e.preventDefault(); e.currentTarget.classList.remove('drag-over');
      if (!draggedElement || draggedElement.dataset.item !== 'guli') return;

      const kanak = e.currentTarget;
      draggedElement.draggable = false;
      draggedElement.classList.remove('cursor-move', 'draggable-item', 'bg-blue-100');
      draggedElement.classList.add('bg-white');
      kanak.appendChild(draggedElement);
      
      draggedElement = null;
      setInfo(`Satu guli diagih.`);
      speak(`Satu guli diagih.`);
      
      if (document.getElementById('guli-pile').children.length === 0) {
        setInfo(`Semua guli telah diagih. Sila tekan butang 'Semak Agihan'.`);
        speak(`Semua guli telah diagih. Sila tekan butang 'Semak Agihan'.`);
        document.getElementById('semak-kongsi-btn').classList.remove('hidden');
      }
    }
    
    function checkKongsiSelesai() {
      const kids = document.querySelectorAll('#kanak-area .drop-zone');
      const counts = [...kids].map(k => k.querySelectorAll('[data-item="guli"]').length);
      const allSame = counts.every(c => c === counts[0]);
      
      const totalGuli = 8; const numKanak = 4;
      let msg;

      if (allSame) {
        const eachDapat = counts[0];
        msg = `Syabas! Agihan sama rata! <br>Setiap kawan dapat ${eachDapat} guli.
               <br>Ayat matematik: <span class="text-blue-700">${totalGuli} &divide; ${numKanak} = ${eachDapat}</span>`;
        setInfo(`Syabas! Semua dapat ${eachDapat} guli.`);
        speak(`Syabas! Semua dapat ${eachDapat} guli.`);
      } else {
        msg = `Oh! Agihan tidak sama rata. Ada kawan dapat ${Math.max(...counts)} dan ada yang dapat ${Math.min(...counts)}.
               <br>Cuba 'Bersih' dan agih semula satu demi satu.`;
        setInfo(`Agihan tidak sama rata. Cuba lagi.`);
        speak(`Agihan tidak sama rata. Cuba lagi.`);
      }
      document.getElementById('kongsi-summary').innerHTML = msg;
    }

    /* ====== Aktiviti 4: Keluarga Fakta (Songsangan Darab) ====== */
    /* (Tiada ralat dikesan di sini, kod asal dikekalkan) */
    function loadKeluargaFaktaActivity(content) {
      const num1 = 4, num2 = 3, ans = 12;
      setInfo(`Lihat fakta darab: ${num1} x ${num2} = ${ans}. Sekarang, lengkapkan ayat bahagi.`);
      
      const numbers = [num1, num2, ans];
      
      content.innerHTML = `
        <h3 class="text-2xl font-bold text-orange-600 mb-6">4. ğŸ  Keluarga Fakta</h3>
        
        <div class="bg-gray-100 rounded-lg p-4 text-center mb-6">
          <p class="text-lg text-gray-700">Fakta Darab (Diberi):</p>
          <p class="text-3xl font-bold text-gray-900">${num1} &times; ${num2} = ${ans}</p>
        </div>

        <div class="mb-8">
          <h4 class="text-lg font-semibold mb-3">Pilih nombor ini:</h4>
          <div id="number-choices" class="flex flex-wrap justify-center gap-4">
            ${numbers.sort(()=>Math.random()-0.5).map(num => `
              <div class="draggable-item bg-orange-100 border-2 border-orange-300 rounded-lg p-4 text-2xl font-bold text-orange-800"
                   draggable="true" ondragstart="dragStart(event)" ondragend="dragEnd(event)" data-number="${num}">
                ${num}
              </div>
            `).join('')}
          </div>
        </div>

        <div>
          <h4 class="text-lg font-semibold mb-3">Lengkapkan ayat bahagi (Letak di sini):</h4>
          <div class="space-y-4">
            <div id="fakta-1" class="flex flex-wrap items-center justify-center gap-3 text-3xl font-bold">
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${ans}">__</div>
              <span>â—</span>
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${num1}">__</div>
              <span>=</span>
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${num2}">__</div>
            </div>
            
            <div id="fakta-2" class="flex flex-wrap items-center justify-center gap-3 text-3xl font-bold">
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${ans}">__</div>
              <span>â—</span>
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${num2}">__</div>
              <span>=</span>
              <div class="drop-zone rounded-lg p-5 text-2xl" ondrop="dropOnFakta(event)" ondragover="allowDrop(event)" ondragleave="dragLeave(event)" data-correct="${num1}">__</div>
            </div>
          </div>
        </div>
        <div id="fakta-summary" class="mt-6 text-xl font-bold text-green-700"></div>
      `;
    }

    function dropOnFakta(e) {
      e.preventDefault(); e.currentTarget.classList.remove('drag-over');
      if (!draggedElement) return;
      
      const draggedNumber = draggedElement.dataset.number;
      const correctNumber = e.currentTarget.dataset.correct;

      if (draggedNumber === correctNumber) {
        e.currentTarget.innerHTML = draggedNumber;
        e.currentTarget.classList.add('drop-zone-filled');
        e.currentTarget.classList.remove('drop-zone');
        e.currentTarget.removeAttribute('ondrop');
        
        const originalParent = draggedElement.parentElement;
        const clone = draggedElement.cloneNode(true);
        clone.draggable = true;
        clone.classList.remove('dragging');
        clone.addEventListener('dragstart', dragStart);
        clone.addEventListener('dragend', dragEnd);
        originalParent.appendChild(clone);
        
        draggedElement.remove(); 
        draggedElement = null;
        
        const msg = `Betul! Nombor ${draggedNumber} diletak.`; setInfo(msg); speak(msg);
        
        if (document.querySelectorAll('.drop-zone[data-correct]').length === 0) {
          const summaryMsg = "Syabas! Anda faham bahagi ialah songsangan darab!";
          document.getElementById('fakta-summary').innerHTML = summaryMsg;
          setInfo(summaryMsg); speak(summaryMsg);
        }
      } else {
        setInfo(`Bukan nombor itu. Cuba lagi.`); speak(`Bukan nombor itu. Cuba lagi.`);
        e.currentTarget.classList.add('shake');
        setTimeout(()=>e.currentTarget.classList.remove('shake'),500);
      }
    }


    /* ====== Aktiviti 5: Akuarium Ajaib (Bahagi dgn 1 / Sifar) ====== */
    /* (Tiada ralat dikesan di sini, kod asal dikekalkan) */
    function loadAkuariumActivity(content) {
      setInfo("Klik mana-mana situasi untuk melihat konsep bahagi.");
      const total = 5;
      
      content.innerHTML = `
        <h3 class="text-2xl font-bold text-red-600 mb-6">5. ğŸ  Akuarium Ajaib</h3>
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">
          
          <div class="number-card bg-red-100 hover:bg-red-200 border-2 border-red-300 rounded-xl p-6 text-center"
               onclick="clickAkuarium(1)">
            <div class="text-4xl font-bold text-red-800 mb-2">${total} ğŸ  &divide; 1 ğŸº</div>
            <p class="text-lg text-red-700">Kongsi ${total} ikan ke 1 balang besar.</p>
          </div>
          
          <div class="number-card bg-red-100 hover:bg-red-200 border-2 border-red-300 rounded-xl p-6 text-center"
               onclick="clickAkuarium(2)">
            <div class="text-4xl font-bold text-red-800 mb-2">${total} ğŸ  &divide; ${total} ğŸº</div>
            <p class="text-lg text-red-700">Kongsi ${total} ikan ke ${total} balang kecil.</p>
          </div>

        </div>
        <div id="akuarium-info" class="mt-6 p-4 bg-red-50 rounded-lg text-center text-xl font-bold text-red-800 min-h-16">
          Klik situasi di atas untuk meneroka.
        </div>
      `;
    }
    
    function clickAkuarium(type) {
      const info = document.getElementById('akuarium-info');
      const total = 5;
      let msg, speakMsg;

      if (type === 1) {
        msg = `
          <div class="text-5xl mb-2">ğŸ ğŸ ğŸ ğŸ ğŸ  â¡ï¸ ğŸº</div>
          ${total} ekor ikan dikumpul dalam 1 balang.
          <br>Balang itu ada <span class="text-blue-700">${total}</span> ekor ikan.
          <br>${total} &divide; 1 = ${total}
        `;
        speakMsg = `Lima bahagi satu sama dengan lima.`;
      } else if (type === 2) {
        msg = `
          <div class="text-5xl mb-2">ğŸ â¡ï¸ğŸº ğŸ â¡ï¸ğŸº ğŸ â¡ï¸ğŸº ğŸ â¡ï¸ğŸº ğŸ â¡ï¸ğŸº</div>
          ${total} ekor ikan diagih ke ${total} balang.
          <br>Setiap balang dapat <span class="text-blue-700">1</span> ekor ikan.
          <br>${total} &divide; ${total} = 1
        `;
        speakMsg = `Lima bahagi lima sama dengan satu.`;
      }
      
      info.innerHTML = msg; 
      setInfo(speakMsg); 
      speak(speakMsg);
    }


    /* ====== Kawalan Umum (Dikekalkan) ====== */
    function clearActivity() {
      currentActivity = 0;
      document.getElementById('activity-content').innerHTML = `
        <div class="text-center py-16">
          <div class="text-6xl mb-4">â—</div>
          <h2 class="text-3xl font-bold text-gray-800 mb-4">Kemahiran Pemulihan: Operasi Bahagi</h2>
          <p class="text-xl text-gray-600 mb-8">Pilih aktiviti di bawah untuk meneroka konsep bahagi.</p>
          <div class="text-4xl">ğŸ‘‡</div>
        </div>
      `;
      setInfo("Pilih aktiviti untuk mula belajar bahagi!");
    }

    function nextActivity() {
      if (currentActivity === 0) return loadActivity(1);
      if (currentActivity < 5) return loadActivity(currentActivity + 1);
      return loadActivity(1);
    }

    // Kekalkan TTS resume (Dikekalkan)
    if ('speechSynthesis' in window) {
      setInterval(() => { if (window.speechSynthesis.paused) window.speechSynthesis.resume(); }, 1000);
    }
  </script>
</body>
</html>
